(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-265e93d4"],{"159b":function(e,t,o){var n=o("da84"),a=o("fdbc"),r=o("17c2"),i=o("9112");for(var c in a){var l=n[c],s=l&&l.prototype;if(s&&s.forEach!==r)try{i(s,"forEach",r)}catch(u){s.forEach=r}}},"17c2":function(e,t,o){"use strict";var n=o("b727").forEach,a=o("a640"),r=o("ae40"),i=a("forEach"),c=r("forEach");e.exports=i&&c?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,o){"use strict";var n=o("23e7"),a=o("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},4732:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"imageContainer"},[o("a-form",{attrs:{layout:"inline",form:e.form}},[o("a-form-item",[o("a-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"400px"},attrs:{placeholder:"搜索关键词"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),o("a-form-item",[o("a-space",[o("a-button",{on:{click:e.reloadVolumeList}},[o("a-icon",{attrs:{type:"reload"}}),e._v(" 刷新 ")],1),o("a-button",{on:{click:e.openNewVolumeModal}},[o("a-icon",{attrs:{type:"plus-circle"}}),e._v(" 创建 ")],1),o("a-tooltip",[o("template",{slot:"title"},[e._v("清空无用卷")]),o("a-button",{attrs:{type:"danger"},on:{click:function(t){e.openPruneVolumeModal=!0}}},[o("a-icon",{attrs:{type:"delete"}}),e._v(" 精简 ")],1)],2)],1)],1)],1),o("a-table",{staticStyle:{"margin-top":"30px"},attrs:{columns:e.columns,"data-source":e.volumeList,size:"small",scroll:{x:!0}},scopedSlots:e._u([{key:"action",fn:function(t,n){return o("span",{},[o("a-space",[o("a-tooltip",[o("template",{slot:"title"},[e._v("详情")]),o("a-icon",{staticStyle:{color:"darkslategray","font-size":"18px"},attrs:{type:"profile"},on:{click:function(t){return e.openVolumeDetail(n.LongName)}}})],2),o("a-divider",{attrs:{type:"vertical"}}),o("a-tooltip",[o("template",{slot:"title"},[e._v("删除")]),o("a-icon",{staticStyle:{color:"orangered","font-size":"18px"},attrs:{type:"delete"},on:{click:function(t){return e.openRemoveVolumeModal(n.LongName)}}})],2),o("a-divider",{attrs:{type:"vertical"}}),o("a-tooltip",[o("template",{slot:"title"},[e._v("挂载")]),o("a-icon",{staticStyle:{color:"darkslategray","font-size":"18px"},attrs:{type:"link"}})],2)],1)],1)}}])}),o("a-drawer",{attrs:{placement:"right",width:"800px",title:"详情信息",visible:e.showVolumeDrawer},on:{close:function(t){e.showVolumeDrawer=!1}}},[o("table",{staticClass:"configTable"},[o("tr",[o("td",{staticClass:"tagTd"},[e._v("名称(Name)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.Name))])]),o("tr",[o("td",{staticClass:"tagTd"},[e._v("卷模式(Driver)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.Driver))])]),o("tr",[o("td",{staticClass:"tagTd"},[e._v("选项(Options)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.Options))])]),o("tr",[o("td",{staticClass:"tagTd"},[e._v("作用域(Scope)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.Scope))])]),o("tr",[o("td",{staticClass:"tagTd"},[e._v("创建时间(CreatedAt)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.CreatedAt))])]),o("tr",[o("td",{staticClass:"tagTd"},[e._v("挂载点(MountPoint)")]),o("td",{staticClass:"contentTd",attrs:{align:"left"}},[e._v(" "+e._s(e.volumeInfo.Mountpoint))])])])]),o("a-modal",{attrs:{title:"创建新的卷",okText:"创建",cancelText:"取消"},on:{ok:e.callCreateNewVolumeApi},model:{value:e.showNewVolumeModal,callback:function(t){e.showNewVolumeModal=t},expression:"showNewVolumeModal"}},[o("a-form-model",{attrs:{form:e.newVolumeConfig}},[o("a-form-model-item",[o("a-input",{attrs:{placeholder:"请输入存储卷名称"},model:{value:e.newVolumeConfig.name,callback:function(t){e.$set(e.newVolumeConfig,"name",t)},expression:"newVolumeConfig.name"}})],1),o("a-form-model-item",[o("a-select",{model:{value:e.newVolumeConfig.driver,callback:function(t){e.$set(e.newVolumeConfig,"driver",t)},expression:"newVolumeConfig.driver"}},[e._l(e.supportVolumeMode,(function(t){return[o("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])]}))],2)],1)],1)],1),o("a-modal",{attrs:{title:"清空无用卷",okText:"删除",cancelText:"关闭"},on:{ok:e.callPruneVolumeApi},model:{value:e.openPruneVolumeModal,callback:function(t){e.openPruneVolumeModal=t},expression:"openPruneVolumeModal"}},[e._v(" 是否清空无用的存储卷? ")]),o("a-modal",{attrs:{title:"删除卷",okText:"删除",cancelText:"关闭"},on:{ok:e.callRemoveVolumeApi},model:{value:e.showRemoveVolumeModal,callback:function(t){e.showRemoveVolumeModal=t},expression:"showRemoveVolumeModal"}},[o("a-checkbox",{on:{change:e.forceRemoveChange},model:{value:e.forceRemoveVolume,callback:function(t){e.forceRemoveVolume=t},expression:"forceRemoveVolume"}},[e._v("强制删除(谨慎使用)")])],1)],1)},a=[],r=(o("4de4"),o("c975"),o("498a"),o("96cf"),o("1da1")),i=o("5530"),c=o("2f62"),l=(o("99af"),o("bc3a")),s=o.n(l);function u(e){var t=this,o=s.a.get("/api/volume/new",{params:e});return o.catch((function(e){t.$notification["error"]({message:"操作失败",description:"操作失败,请检查 Docker 服务是否正常"})})),o}function m(e,t){var o=this,n=s.a.get("/api/volume/".concat(e,"/delete/").concat(t));return n.catch((function(){o.$notification["error"]({message:"操作失败",description:"操作失败,请检查 Docker 服务是否正常"})})),n}function f(){var e=this,t=s.a.get("/api/volume/prune");return t.catch((function(){e.$notification["error"]({message:"操作失败",description:"操作失败,请检查 Docker 服务是否正常"})})),t}var d={createNewVolume:u,removeVolume:m,pruneVolume:f},p=o("ed08"),v=[{title:"卷名称",dataIndex:"Name",key:"Name"},{title:"卷模式",dataIndex:"Driver",key:"Driver"},{title:"卷范围",dataIndex:"Scope",key:"Scope"},{title:"创建时间",key:"Created",dataIndex:"Created"},{title:"操作",key:"action",fixed:"right",width:"50px",scopedSlots:{customRender:"action"}}],h={data:function(){return{form:{},showNewVolumeModal:!1,showRemoveVolumeModal:!1,showVolumeDrawer:!1,forceRemoveVolume:!1,openPruneVolumeModal:!1,searchKey:"",columns:v,currentVolumeName:"",newVolumeConfig:{}}},computed:{volumeList:function(){var e=this,t=this.$store.state.volume.list;return""!==this.searchKey&&""!==this.searchKey.trim()?t.filter((function(t){return t.LongName.indexOf(e.searchKey)>=0})):t},volumeInfo:function(){return this.$store.state.volume.info},supportVolumeMode:function(){var e=this.$store.state.dockerInfo.dockerPlugins;return e.Volume}},mounted:function(){this.updateVolumeList(),this.updateDockerInfo()},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])({updateVolumeList:"updateVolumeList",updateVolumeInfo:"updateVolumeInfo"})),{},{forceRemoveChange:function(e){this.forceRemoveVolume=e.target.checked},openNewVolumeModal:function(){this.showNewVolumeModal=!0},callCreateNewVolumeApi:function(){var e=this,t=Object(p["guid"])();this.$message.loading({content:"创建存储卷中，请稍后...",key:t}),d.createNewVolume(this.newVolumeConfig).then((function(o){var n=o.data,a=n.Code,r=n.Msg;"OK"===a?(e.$message.info({content:"存储卷创建完成!",key:t,duration:2}),e.updateVolumeList(),e.showNewVolumeModal=!1):(e.$message.error({content:r,key:t}),e.showNewVolumeModal=!1)}))},openRemoveVolumeModal:function(e){this.showRemoveVolumeModal=!0,this.currentVolumeName=e},openVolumeDetail:function(e){this.showVolumeDrawer=!0,this.updateVolumeInfo(e)},callRemoveVolumeApi:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(p["guid"])(),e.$message.loading({content:"删除存储卷中，请稍后...",key:o}),t.next=4,d.removeVolume(e.currentVolumeName,e.forceRemoveVolume);case 4:n=t.sent,a=n.data,r=a.Code,i=a.Msg,"OK"===r?(e.$message.info({content:"存储卷删除完成!",key:o,duration:2}),e.updateVolumeList(),e.showRemoveVolumeModal=!1):(e.$notification["error"]({message:"存储卷删除失败",description:i}),e.showRemoveVolumeModal=!1);case 7:case"end":return t.stop()}}),t)})))()},callPruneVolumeApi:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(p["guid"])(),e.$message.loading({content:"无用删除存储卷中，请稍后...",key:o}),t.next=4,d.pruneVolume();case 4:n=t.sent,a=n.data,r=a.Code,i=a.Msg,"OK"===r?(e.$message.info({content:"无用存储卷删除完成!",key:o,duration:2}),e.updateVolumeList(),e.openPruneVolumeModal=!1):(e.$notification["error"]({message:"无用存储卷删除失败",description:i}),e.openPruneVolumeModal=!1);case 7:case"end":return t.stop()}}),t)})))()},reloadVolumeList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateVolumeList(),e.$message.info("存储卷列表刷新完成");case 2:case"end":return t.stop()}}),t)})))()}})},g=h,V=(o("ed4c"),o("2877")),w=Object(V["a"])(g,n,a,!1,null,"502d60f0",null);t["default"]=w.exports},"498a":function(e,t,o){"use strict";var n=o("23e7"),a=o("58a8").trim,r=o("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},"4de4":function(e,t,o){"use strict";var n=o("23e7"),a=o("b727").filter,r=o("1dde"),i=o("ae40"),c=r("filter"),l=i("filter");n({target:"Array",proto:!0,forced:!c||!l},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o("a4d3"),o("4de4"),o("4160"),o("e439"),o("dbb4"),o("b64b"),o("159b");function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,o){var n=o("1d80"),a=o("5899"),r="["+a+"]",i=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),l=function(e){return function(t){var o=String(n(t));return 1&e&&(o=o.replace(i,"")),2&e&&(o=o.replace(c,"")),o}};e.exports={start:l(1),end:l(2),trim:l(3)}},9781:function(e,t,o){},b64b:function(e,t,o){var n=o("23e7"),a=o("7b0b"),r=o("df75"),i=o("d039"),c=i((function(){r(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return r(a(e))}})},c8d2:function(e,t,o){var n=o("d039"),a=o("5899"),r="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||r[e]()!=r||a[e].name!==e}))}},dbb4:function(e,t,o){var n=o("23e7"),a=o("83ab"),r=o("56ef"),i=o("fc6a"),c=o("06cf"),l=o("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,o,n=i(e),a=c.f,s=r(n),u={},m=0;while(s.length>m)o=a(n,t=s[m++]),void 0!==o&&l(u,t,o);return u}})},e439:function(e,t,o){var n=o("23e7"),a=o("d039"),r=o("fc6a"),i=o("06cf").f,c=o("83ab"),l=a((function(){i(1)})),s=!c||l;n({target:"Object",stat:!0,forced:s,sham:!c},{getOwnPropertyDescriptor:function(e,t){return i(r(e),t)}})},ed4c:function(e,t,o){"use strict";o("9781")}}]);
//# sourceMappingURL=chunk-265e93d4.4de92287.js.map